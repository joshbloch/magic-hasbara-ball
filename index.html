<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Magical Hasbara 8-Ball</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: white;
      overflow: hidden;
      position: relative;
    }

    /* "Criticize Israel" label above ball */
    .label {
      font-size: 2.2rem;
      font-weight: 900;
      color: #003c8f; /* distinct deep blue */
      text-shadow:
        1px 1px 0 #001f4d,
        2px 2px 2px rgba(0,0,0,0.2);
      margin-bottom: 25px;
      user-select: none;
    }

    .ball {
      width: 80vw;
      max-width: 320px;
      height: 80vw;
      max-height: 320px;
      border-radius: 50%;

      /* 3D shading with imagined light from top right */
      background:
        radial-gradient(circle at 75% 25%, rgba(255,255,255,0.65), transparent 40%),
        radial-gradient(circle at 50% 50%, #222, #000 70%);
      box-shadow:
        inset 0 15px 25px rgba(255,255,255,0.15),
        0 18px 40px rgba(0,0,0,0.85);
      
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      user-select: none;
      z-index: 10;
      overflow: hidden;  /* crucial for clipping the "8" */
    }

    /* White circle with '8' painted partially inside the ball */
    .ball::before {
      content: "8";
      position: absolute;
      top: 5px;
      right: 5px;
      width: 60px;
      height: 60px;
      background: white;
      border-radius: 50%;
      border: 3px solid black;
      color: black;
      font-weight: 900;
      font-size: 3rem;
      line-height: 60px;
      text-align: center;
      font-family: 'Arial Black', Arial, sans-serif;
      box-shadow: 1px 1px 4px rgba(0,0,0,0.5);
      transform: translate(15%, -15%);
      pointer-events: none;
      user-select: none;
      z-index: 20;
    }

    /* Answer box styling */
    .answer {
      position: absolute;
      color: black;
      background-color: white;
      border-radius: 10px;
      padding: 10px 14px;
      text-align: center;
      max-width: 70%;
      font-size: 1rem;
      font-weight: bold;
      z-index: 15;
      user-select: none;
    }

    /* Flashing menorahs container */
    .menorahs {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      gap: 12px;
      z-index: 25;
      user-select: none;
    }

    .menorah {
      width: 30px;
      height: 40px;
      opacity: 0;
      filter: drop-shadow(0 0 2px #0047ab);
      animation: menorah-flash 1.5s infinite;
    }
    .menorah:nth-child(1) {
      animation-delay: 0s;
    }
    .menorah:nth-child(2) {
      animation-delay: 0.5s;
    }
    .menorah:nth-child(3) {
      animation-delay: 1s;
    }

    @keyframes menorah-flash {
      0%, 33%, 100% { opacity: 0; }
      16% { opacity: 1; }
    }

    /* Menorah rain container */
    .rain {
      pointer-events: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: visible;
      z-index: 5;
      user-select: none;
    }

    .rain img {
      position: absolute;
      width: 18px;
      height: 24px;
      animation-name: fall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      filter: drop-shadow(0 0 2px #003c8f);
      user-select: none;
    }

    @keyframes fall {
      0% { transform: translateY(-30px) rotate(0deg); }
      100% { transform: translateY(110vh) rotate(360deg); }
    }

    @media (max-width: 500px) {
      .answer {
        font-size: 0.85rem;
      }

      .label {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>

  <div class="label">Criticize Israel</div>

  <div class="ball" id="ball">
    <div class="answer" id="answer">Tap the ball</div>
    <div class="menorahs" id="menorahs" style="display:none;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/8b/Menorah_Icon_Blue.svg" alt="Menorah" class="menorah" />
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/8b/Menorah_Icon_Blue.svg" alt="Menorah" class="menorah" />
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/8b/Menorah_Icon_Blue.svg" alt="Menorah" class="menorah" />
    </div>
  </div>

  <div class="rain" id="rain"></div>

  <audio id="sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_7981d15c07.mp3?filename=short-trumpet-fanfare-6714.mp3" preload="auto"></audio>

  <script>
    // Responses (sample 20 — expand with more as needed)
    const responses = [
      "That's antisemitism.",
      "Israel has the right to defend itself.",
      "You’re ignoring Hamas terrorism.",
      "What about China or Iran?",
      "That’s a blood libel.",
      "You're being one-sided.",
      "Israel is the only democracy in the Middle East.",
      "You're singling out Jews.",
      "That’s a double standard.",
      "This is about security, not apartheid.",
      "Criticism is often a mask for hate.",
      "Israel's actions are legal under international law.",
      "You're ignoring rocket attacks on civilians.",
      "Palestinian leadership bears responsibility.",
      "Israel is committed to peace talks.",
      "Many countries support Israel's stance.",
      "You can't deny Israel’s technological advances.",
      "What about Israel's humanitarian aid?",
      "Comparing Israel to Nazis is offensive.",
      "You're ignoring the complexity of the conflict."
    ];

    // Rain menorah setup variables
    const rainContainer = document.getElementById('rain');
    const rainCount = 60; // 200% more rain means 60 instead of 20
    const menorahImgSrc = 'https://upload.wikimedia.org/wikipedia/commons/8/8b/Menorah_Icon_Blue.svg';

    // Create rain menorahs
    function createRain() {
      for (let i = 0; i < rainCount; i++) {
        const menorah = document.createElement('img');
        menorah.src = menorahImgSrc;
        menorah.classList.add('rain');
        menorah.style.left = Math.random() * window.innerWidth + 'px';
        menorah.style.top = (Math.random() * -window.innerHeight) + 'px';
        menorah.style.animationDuration = (4 + Math.random() * 3) + 's';
        menorah.style.animationDelay = (Math.random() * 4) + 's';
        rainContainer.appendChild(menorah);
      }
    }

    // Clear rain menorahs
    function clearRain() {
      while (rainContainer.firstChild) {
        rainContainer.removeChild(rainContainer.firstChild);
      }
    }

    // Flashing menorahs while "thinking"
    const menorahsEl = document.getElementById('menorahs');

    const ball = document.getElementById("ball");
    const answer = document.getElementById("answer");
    const sound = document.getElementById("sound");

    ball.addEventListener("click", () => {
      // If already "thinking", ignore clicks
      if (ball.classList.contains('processing')) return;

      ball.classList.add('processing');
      answer.textContent = "";
      menorahsEl.style.display = "flex";
      clearRain();
      createRain();

      // After 3 seconds show answer and stop rain & menorah animation
      setTimeout(() => {
        // Play sound
        sound.currentTime = 0;
        sound.play().catch(e => console.error("Sound error:", e));

        // Random answer
        const randomIndex = Math.floor(Math.random() * responses.length);
        answer.textContent = responses[randomIndex];

        menorahsEl.style.display = "none";
        clearRain();
        ball.classList.remove('processing');
      }, 3000);
    });

  </script>
</body>
</html>
